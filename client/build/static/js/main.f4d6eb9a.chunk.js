(this.webpackJsonpglfsblog=this.webpackJsonpglfsblog||[]).push([[0],{52:function(e,t,a){e.exports=a(82)},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(16),l=a.n(i),c=a(5),o=a(6),s=a(9),u=a(22),m=a(47),d=a(27),p={isSignedIn:null,userId:null,firstName:null},g=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return Object(d.a)(Object(d.a)({},e),{},{isSignedIn:t.payload.isSignedIn,userId:t.payload.userId,firstName:t.payload.firstName});case"SIGN_OUT":return Object(d.a)(Object(d.a)({},e),{},{isSignedIn:!1,userId:null});default:return e}},viewUsersInState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"VIEW_USER":return t.payload;default:return e}},createUserInState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_USER":return t.payload;default:return e}},blogs:function(){return[{title:"tokyo",date:"06/28/2020"},{title:"osaka",date:"06/28/2020"},{title:"nagoya",date:"06/28/2020"},{title:"sapporo",date:"06/28/2020"}]},selectedBlog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"BLOG_SELECTED"===t.type?t.payload:e}}),f=a(11),v=a(12),h=a(14),E=a(13),b=a(21),N=a.n(b),w=a(25),O=a(48),y=a.n(O).a.create({baseURL:"http://localhost:3050"}),S=function(e,t,a){return{type:"SIGN_IN",payload:{isSignedIn:e,userId:t,firstName:a}}},j=function(){return{type:"SIGN_OUT"}},k=function(e){return{type:"CREATE_USER",payload:e}},I=(a(79),function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).clickDropdown=function(){n.state.open?document.removeEventListener("click",n.clickedOutside,!1):document.addEventListener("click",n.clickedOutside,!1),n.setState((function(e){return{open:!e.open}}))},n.clickedOutside=function(e){n.wrapper.contains(e.target)||n.clickDropdown()},n.state={open:!1},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"497745475816-s1se1ef8qio68uoat80f87bdmmbmtg33.apps.googleusercontent.com",scope:"profile"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance()}))}))}},{key:"signOutUser",value:function(e,t){var a=this;t.signOut().then((function(){e(),a.signOut()}))}},{key:"signOut",value:function(){this.props.history.push("/signup/login")}},{key:"renderSignInOutButton",value:function(){var e=this,t=this.props,a=t.isSignedIn,n=t.signOut;return a?r.a.createElement("div",null,r.a.createElement(c.b,{to:"/blogs/new"},r.a.createElement("div",{className:"item"},"New Blog Post")),r.a.createElement(c.b,{to:"/blogs/edit/:id"},r.a.createElement("div",{className:"item"},"Edit Blog Post")),r.a.createElement(c.b,{to:"/blogs/view/:id"},r.a.createElement("div",{className:"item"},"View Blog Post")),r.a.createElement("div",{className:"item",onClick:function(){return e.signOutUser(n,e.auth)}},"Sign Out")):a?void 0:r.a.createElement(c.b,{to:"/signup/login"},r.a.createElement("div",{className:"item"},"Login"))}},{key:"render",value:function(){var e=this,t=this.state.open;return r.a.createElement("div",{className:"ui right dropdown link item",ref:function(t){e.wrapper=t},onClick:this.clickDropdown,onKeyDown:this.clickDropdown},r.a.createElement("div",null,r.a.createElement("i",{className:"bars icon"}),t&&r.a.createElement("div",{className:"menu transition visible"},r.a.createElement(c.b,{to:"/"},r.a.createElement("div",{className:"item"},"Home")),r.a.createElement(c.b,{to:"/blogs/list"},r.a.createElement("div",{className:"item"},"View All Blogs")),this.renderSignInOutButton())))}}]),a}(n.Component)),U=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn,userName:e.auth.userId,firstName:e.auth.firstName}}),{signIn:S,signOut:j})(Object(o.e)(I)),x=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui borderless main menu"},r.a.createElement("div",{className:"ui text container"},r.a.createElement("div",{className:"header item"},r.a.createElement(c.b,{to:"/",className:"ui header"},r.a.createElement("i",{className:"circle icon red"}))),r.a.createElement(U,null)))}}]),a}(n.Component),A=Object(s.b)((function(e){return e}))((function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",e.auth.firstName),r.a.createElement(c.b,{to:"/blogs/list"},"View All Blogs"),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/blogs/new"},"Post a New Blog"))})),B=function(e){var t=e.blog;return t?r.a.createElement("div",null,r.a.createElement(c.b,{to:"/blogs/edit"},"Edit"),r.a.createElement("h1",null,t.title),r.a.createElement("div",null,t.date),r.a.createElement("div",null,"Blog Image"),r.a.createElement("div",null,"Blog Content"),r.a.createElement("div",null,"Creator/Poster")):r.a.createElement("div",null,"no blog selected, please select blog")};B.defaultProps={blog:{}};var C=Object(s.b)((function(e){return{blog:e.selectedBlog}}))(B),P=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"renderList",value:function(){var e=this.props,t=e.blogs,a=e.selectBlog;return t.map((function(e){return r.a.createElement("div",{className:"item",key:e.title},r.a.createElement("div",{className:"right floated content"},r.a.createElement(c.b,{to:"/blogs/view"},r.a.createElement("button",{type:"submit",className:"ui button primary",onClick:function(){return a(e)}},"Select"))),r.a.createElement("div",{className:"content"},e.title))}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui divider"},r.a.createElement(c.b,{to:"/blogs/new",className:"item"},"New Blog"),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/blogs/delete",className:"item"},"DeleteBlog"),r.a.createElement("div",{className:"ui divided list"},this.renderList()))}}]),a}(n.Component);P.defaultProps={blogs:{},selectBlog:function(){}};var D=Object(s.b)((function(e){return{blogs:e.blogs}}),{selectBlog:function(e){return{type:"BLOG_SELECTED",payload:e}}})(P),_=a(8),L=a(51),R=a(50),q=function(e){var t=e.component;switch(console.log(e),t){case"text":return r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:e.name,type:"text",component:"input",validate:e.validate},(function(t){var a=t.input,n=t.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},a,{placeholder:e.placeholder})),n.touched&&n.error&&r.a.createElement("span",null,n.error))})));case"checkbox":return r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:e.name,component:"input",type:"checkbox",value:e.value})," ",e.children);case"textarea":return r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:e.name,component:"textarea",placeholder:e.placeholder}));case"select":return r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:e.name,component:"select",placeholder:e.placeholder},e.children));case"selectMultiple":return r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:e.name,component:"select",placeholder:e.placeholder,className:"ui fluid search dropdown",multiple:""},e.children));default:return null}},T=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(e){console.log(e)},e.required=function(e){return e?void 0:"Required"},e.validURL=function(e){return/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+$/gm.test(e)?void 0:"Must be valid URL"},e.composeValidators=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=[{value:"food",label:"Food"},{value:"travel",label:"Travel"}],a=Object(R.a)();return r.a.createElement("div",{className:"column"},r.a.createElement("h1",{className:"ui header"},"Post New Blog"),r.a.createElement(_.b,{onSubmit:this.onSubmit,subscription:{},initialValues:{blogTitle:""},render:function(n){n.submitError;var i=n.handleSubmit;n.form,n.values;return r.a.createElement("form",{className:"ui large form",onSubmit:i},r.a.createElement("div",{className:"ui stacked segment"},r.a.createElement(q,{name:"blogTitle",component:"text",placeholder:"Title",validate:e.required}),r.a.createElement(q,{component:"text",name:"blogLocation",placeholder:"Destination"}),r.a.createElement(L.a,{className:"field",closeMenuOnSelect:!1,components:a,isMulti:!0,options:t,placeholder:"Category"}),r.a.createElement(q,{component:"text",name:"url",placeholder:"Helpful Links",validate:e.composeValidators(e.required,e.validURL)}),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"file",accept:"image/png, image/jpeg"})),r.a.createElement(q,{component:"text",name:"blogDescription",placeholder:"Short Description/Caption"}),r.a.createElement(q,{component:"textarea",name:"blogbody",placeholder:"Start Writing Here"}),r.a.createElement("button",{className:"ui submit button",type:"submit"},"Submit")))}}))}}]),a}(n.Component),V=function(){return r.a.createElement("div",null,"BlogEdit")},M=function(){return r.a.createElement("div",null,"BlogDelete")},G=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(f.a)(this,a),(n=t.call(this,e)).onAuthChange=function(e){var t=n.props,a=t.signIn,r=t.signOut,i=t.createNewUser;e?(a(n.auth.isSignedIn.get(),n.currentUser.getId(),n.auth.currentUser.get().getBasicProfile().getGivenName()),y.get("/api/users/".concat(n.auth.currentUser.get().getBasicProfile().getEmail())).then((function(e){""===e.data&&(console.log("new user signing in by google"),console.log(e.data),i&&(console.log("will create new account"),y.post("/api/users",{gmailID:"".concat(n.auth.currentUser.get().getId()),firstName:"".concat(n.auth.currentUser.get().getBasicProfile().getGivenName()),lastName:"".concat(n.auth.currentUser.get().getBasicProfile().getFamilyName()),email:"".concat(n.auth.currentUser.get().getBasicProfile().getEmail()),createdAt:"".concat(new Date)}).then((function(e){console.log(e.status)})).catch((function(e){console.log(e)}))))})),n.props.history.push("/")):r()},n.onSignInClick=function(){n.auth.signIn()},n.onSignOutClick=function(){n.auth.signOut()},n.state={createNewUser:e.createNewUser},n}return Object(v.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"497745475816-ndjdnh1jmcd3og0a5j10teru22kpejnq.apps.googleusercontent.com",scope:"profile"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.currentUser=e.auth.currentUser.get(),e.userBasicInfo=e.currentUser.getBasicProfile(),console.log(e.auth),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){var e=this.props.isSignedIn;return null===e?null:e?r.a.createElement("button",{type:"button",onClick:this.onSignOutClick,className:"ui red google button"},r.a.createElement("i",{className:"google icon"}),"Sign Out"):r.a.createElement("button",{type:"button",onClick:this.onSignInClick,className:"ui red google button"},r.a.createElement("i",{className:"google icon"}),"Sign In with Google")}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderAuthButton())}}]),a}(n.Component);G.defaultProps={signIn:function(){},signOut:function(){},isSignedIn:null};var F=Object(s.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:S,signOut:j,createUserAction:k})(Object(o.e)(G)),W=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:""},e.onSubmit=function(){var t=Object(w.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.signIn,""===a.email){t.next=4;break}return t.next=4,y.get("/api/users/".concat(a.email)).then((function(t){return""!==t.data?(e.setState({currentUser:t.data}),console.log(t.data),n(!0,t.data._id,t.data.firstName),e.props.history.push("/"),t.data):(e.setState({currentUser:t.data}),console.log("login failed"),null)})).catch((function(e){console.log(e)}));case 4:if(""!==e.state.currentUser||""===a.email){t.next=7;break}return t.abrupt("return",{email:"No Account Associated With This Email"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(v.a)(a,[{key:"render",value:function(){var e=this.state.currentUser;return r.a.createElement("div",{className:"signupform"},r.a.createElement("h1",{className:"ui center aligned header"},"Login"),r.a.createElement("div",{className:"ui center aligned basic segment"},r.a.createElement(F,{createNewUser:!1}),r.a.createElement("div",{className:"ui horizontal divider"},"OR"),r.a.createElement(_.b,{onSubmit:this.onSubmit,subscription:{},initialValues:{email:"",password:""},validate:function(t){var a={};return t.email||(a.email="Required"),t.password||(a.password="Required"),""!==e&&e.password!==t.password&&(a.password="Email and Password do not match."),a},render:function(e){var t=e.handleSubmit;e.form,e.values,e.submitError;return r.a.createElement("form",{className:"ui form attached fluid segment",onSubmit:t},r.a.createElement("div",{className:"ui stacked segment"},r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"email",component:"input",type:"text",placeholder:"Email"},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"Email"})),(a.error||a.submitError)&&a.touched&&r.a.createElement("span",null,a.error||a.submitError))}))),r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"password",component:"input",type:"password",placeholder:"Password"},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"Password"})),a.touched&&a.error&&r.a.createElement("span",null,a.error))}))),r.a.createElement("div",null,r.a.createElement("button",{className:"ui submit button",type:"submit"},"Submit"))))}}),r.a.createElement("div",{className:"ui bottom attached warning message"},"Need an Account? ",r.a.createElement(c.b,{to:"/signup/FinalForm"},"Sign Up"))))}}]),a}(n.Component),z=Object(s.b)((function(e){return e}),{signIn:S})(Object(o.e)(W)),H=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(v.a)(a,[{key:"componentDidMount",value:function(){console.log("viewing user from db"),this.props.viewUserAction()}},{key:"renderUsers",value:function(){return this.props.users.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("p",null,"Name: ",e.firstName," ",e.lastName),r.a.createElement("p",null,"email: ",e.email))}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderUsers())}}]),a}(n.Component),J=Object(s.b)((function(e){return{users:e.viewUsersInState}}),{viewUserAction:function(){return function(){var e=Object(w.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.get("/api");case 2:a=e.sent,t({type:"VIEW_USER",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(H),Z=function(e){Object(h.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={existingUser:!1},e.onSubmit=function(){var t=Object(w.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.signIn,t.next=3,y.get("/api/users/".concat(a.email)).then((function(t){if(""===t.data){var r=new Date;return console.log("onSubmit callback here: ".concat(JSON.stringify(a))),void y.post("/api/users",{firstName:"".concat(a.firstName),lastName:"".concat(a.lastName),email:"".concat(a.email),password:"".concat(a.password),createdAt:"".concat(r)}).then((function(t){console.log(t.status),n(!0,null,a.firstName),e.props.history.push("/")})).catch((function(e){alert(e),console.log(e)}))}e.setState({existingUser:!0})})).catch((function(e){console.log(e)}));case 3:if(!e.state.existingUser){t.next=6;break}return t.abrupt("return",{email:"This Email is Already Registered"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.required=function(e){return e?void 0:"Required"},e.validEmail=function(e){return/[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z0-9]{2,}\w+/g.test(e)?void 0:"Must be a valid email"},e.composeValidators=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduce((function(t,a){return t||a(e)}),void 0)}},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",{className:"ui center aligned header"},"Sign Up"),r.a.createElement("div",{className:"ui placeholder segment"},r.a.createElement("div",{className:"ui two column very relaxed stackable grid"},r.a.createElement("div",{className:"column"},r.a.createElement(_.b,{onSubmit:this.onSubmit,subscription:{},validate:function(e){var t={};return e.password!==e.confirmPassword&&(t.confirmPassword="Password Does Not Match"),t},initialValues:{firstName:"",lastName:"",email:"",password:"",confirmPassword:""},render:function(t){t.submitError;var a=t.handleSubmit;t.form,t.values;return r.a.createElement("form",{className:"ui form attached fluid segment",onSubmit:a},r.a.createElement("div",{className:"ui stacked segment"},r.a.createElement("div",{className:"two fields"},r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"firstName",component:"input",type:"text",placeholder:"First Name",validate:e.required},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"First Name"})),a.touched&&a.error&&r.a.createElement("span",null,a.error))}))),r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"lastName",component:"input",type:"text",placeholder:"Last Name",validate:e.required},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"Last Name"})),a.touched&&a.error&&r.a.createElement("span",null,a.error))})))),r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"email",component:"input",type:"text",placeholder:"email",validate:e.composeValidators(e.required,e.validEmail)},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"Email"})),a.touched&&(a.error||a.submitError)&&r.a.createElement("span",null,a.error||a.submitError))}))),r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"password",component:"input",type:"password",placeholder:"password",validate:e.required},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"Password"})),a.touched&&a.error&&r.a.createElement("span",null,a.error))}))),r.a.createElement("div",{className:"field"},r.a.createElement(_.a,{name:"confirmPassword",component:"input",type:"password",placeholder:"confirmPassword",validate:e.required},(function(e){var t=e.input,a=e.meta;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:"Confirm Password"})),a.touched&&a.error&&r.a.createElement("span",null,a.error))}))),r.a.createElement("div",null,r.a.createElement("button",{className:"ui submit button",type:"submit"},"Submit"))))}}),r.a.createElement("div",{className:"ui bottom attached warning message"},"Already have an Account? ",r.a.createElement(c.b,{to:"/signup/login"},"Sign In"))),r.a.createElement("div",{className:"middle aligned column"},r.a.createElement(F,{createNewUser:!0}))),r.a.createElement("div",{className:"ui vertical divider"},"OR")))}}]),a}(n.Component),X=Object(s.b)((function(e){return console.log("state from final form"),console.log(e),e}),{signIn:S,createUserAction:k})(Object(o.e)(Z)),$=(a(81),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d),K=Object(u.e)(g,$(Object(u.a)(m.a)));l.a.render(r.a.createElement(s.a,{store:K},r.a.createElement(c.a,null,r.a.createElement(x,null),r.a.createElement("div",{className:"ui text container"},r.a.createElement("div",{className:"ui row"},r.a.createElement("div",{className:"column wide"},r.a.createElement(o.a,{path:"/",exact:!0,component:A}),r.a.createElement(o.a,{path:"/blogs/list",component:D}),r.a.createElement(o.a,{path:"/blogs/new",component:T}),r.a.createElement(o.a,{path:"/blogs/edit/:id",component:V}),r.a.createElement(o.a,{path:"/blogs/view/:id",component:C}),r.a.createElement(o.a,{path:"/blogs/delete/:id",component:M}),r.a.createElement(o.a,{path:"/signup/login",component:z}),r.a.createElement(o.a,{path:"/signup/finalform",component:X}),r.a.createElement(o.a,{path:"/admin/admin",component:J})))))),document.querySelector("#root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.f4d6eb9a.chunk.js.map